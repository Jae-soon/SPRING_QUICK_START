06 비지니스 컴포넌트 실습 1.md
=======================
# 1. BoardService 컴포넌트 구조  
프로젝트마다 다르겠지만 일반적으로 비즈니스 컴포넌트는 4개의 자바 파일로 구성된다.   
그리고 각 자바 파일을 작성하는 순서와 이름 규칙도 어느 정도는 정해져 있는 것이 일반적이다.  
  
**준비**   
BOARD 테이블과 관련된 BoardService 컴포넌트에 대한 클래스 다이어그램이며,  
```BoardVO```, ```BoardDAO```, ```BoardService```, ```BoardServiceImpl``` 클래스로 구현되어 있다.

![KakaoTalk_20191031_222544669](https://user-images.githubusercontent.com/50267433/67950674-6af9e280-fc2d-11e9-9a38-b026dfa47489.jpg)
   
***
# 2. Value Object 클래스 작성  
**VO 클래스는 레이어와 레이어 사이에서 관련된 데이터를 한꺼번에 주고받을 목적으로 사용하는 클래스이다.**    
**DTO라 하기도 하는데**, 데이터 전달을 목적으로 사용하는 객체이므로 결국 같은 의미의 용어라고 생각하면 된다.    

VO 클래스를 작성하려면 가장 먼저 데이터베이스에 생성되어 있는 테이블의 구조를 확인해야 한다.  
```
SEQ  	TITLE  	WRITER  	CONTENT  	REGDATE  	CNT  
1	  가입인사 관리자	잘 부탁드립니다 2019-10-27	0
```
```
package com.springbook.biz;

import java.sql.Date;

public class BoardVO {
	private int seq;
	private String title;
	private String writer;
	private String content;
	private Date regDate;
	private int cnt;
	
	public int getSeq() {
		return seq;
	}
	public void setSeq(int seq) {
		this.seq = seq;
	}
	public String getTitle() {
		return title;
	}
	public void setTitle(String title) {
		this.title = title;
	}
	public String getWriter() {
		return writer;
	}
	public void setWriter(String writer) {
		this.writer = writer;
	}
	public String getContent() {
		return content;
	}
	public void setContent(String content) {
		this.content = content;
	}
	public Date getRegDate() {
		return regDate;
	}
	public void setRegDate(Date regDate) {
		this.regDate = regDate;
	}
	public int getCnt() {
		return cnt;
	}
	public void setCnt(int cnt) {
		this.cnt = cnt;
	}
	
	@Override
	public String toString() {
		return "BoardVO [seq="+seq+", title="+title+", writer="+writer+
			   ", content="+content+", regDate="+regDate+", cnt="+cnt+"]";
	}
}
```
변수를 지정해주고 ```ALT SHT S```를 누른 후 getter/setter 부분을 클릭해서 쉽게 생성 가능하다. (코드 제네레이션)    
옵션으로 ```toString()```메소드를 생성해 놓으면 나중에 VO 객체의 값을 출력할 때 요긴하게 사용할 수 있다.      
   
***
# 3. DAO 클래스 작성
DAO 클래스는 데이터베이스 연동을 담당하는 클래스이다.    
따라서 DAO 클래스에는 CRUD 기능의 메소드가 구현되어야 하는데,     
이때 우리가 사용할 H2 데이터베이스에서 제공하는 JDBC 드라이버가 필요하다.   
  
각 RDBMS는 각각에 맞는 드라이버가 있으니 이를 다운받아 사용해야 한다.  
  
## 3.1. 드라이버 내려받기    
**pom.xml**
```
~ 중략
	<dependencies>
		<!-- H2 데이터베이스 -->
		<dependency>
			<groupId>com.h2database</groupId>
			<artifactId>h2</artifactId>
			<version>1.4.200</version> <!-- 현재 h2 버전에 맞게끔 매핑한다.-->
		</dependency>
	
		<!-- Spring -->
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-context</artifactId>
			<version>${org.springframework-version}</version>
			<exclusions>
				<!-- Exclude Commons Logging in favor of SLF4j -->
				<exclusion>
					<groupId>commons-logging</groupId>
					<artifactId>commons-logging</artifactId>
				 </exclusion>
			</exclusions>
		</dependency>
~ 중략
```
  
## 3.2. JDBC Utility 클래스  
Mybaits 가 있지만 공부 초반에는 JDBC를 이용해 데이터베이스 연동처리를 할 것이다.  
따라서 모든 DAO 클래스에서 공통으로 사용할 JDBCUtil 클래스를 작성하여   
Connection 획득과 해제 작업을 공통으로 처리하도록 한다.  
```
package com.springbook.biz.common;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class JDBCUtil {
	public static Connection getConnection() {
		try {
			Class.forName("org.h2.Driver");
			return DriverManager.getConnection("jdbc:h2:tcp://localhost/~/test", "sa", "");
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	}

	public static void close(PreparedStatement pstmt, Connection conn) {
		if (pstmt != null) {
			try {
				if (!pstmt.isClosed())
					pstmt.close();
			} catch (Exception e) {
				e.printStackTrace();
			} finally {
				pstmt = null;
			}
		}
		if (conn != null) {
			try {
				if (!conn.isClosed())
					conn.close();
			} catch (Exception e) {
				e.printStackTrace();
			} finally {
				conn = null;
			}
		}

	}

	public static void close(ResultSet rs, PreparedStatement pstmt, Connection conn) {
		if (rs != null) {
			try {
				if (!rs.isClosed())
					rs.close();
			} catch (Exception e) {
				e.printStackTrace();
			} finally {
				rs = null;
			}
		}
		close(pstmt, conn);
	}
}
```
## 3.3. DAO 클래스 작성 


   



### 3.1.1. 내용1
```
내용1
```
